/*
 * This file was generated by the Gradle 'init' task.
 */

allprojects {
	group = 'org.jtmc'
	version = '0.1.0-SNAPSHOT'
}

subprojects {
	apply plugin: 'java'
	apply plugin: 'maven-publish'
	apply plugin: 'jacoco'

	repositories {
		jcenter()
		mavenCentral()
	}

	sourceCompatibility = '1.8'

	publishing {
		repositories {
			maven {
				name = "GitHubPackages"
				url = uri("https://maven.pkg.github.com/" + System.getenv("GITHUB_REPOSITORY"))
				credentials {
					username = project.findProperty("gpr.user") ?: System.getenv("GITHUB_PKG_USERNAME")
					password = project.findProperty("gpr.key") ?: System.getenv("GITHUB_PKG_TOKEN")
				}
			}
    	}
		publications {
			maven(MavenPublication) {
				from(components.java)
			}
		}
	}

	jacocoTestReport {
		dependsOn test // tests are required to run before generating t
		reports {
			xml.enabled true
			csv.enabled false
			html.destination file("${buildDir}/jacocoHtml")
		}
	}

	tasks.withType(JavaCompile) {
		options.encoding = 'UTF-8'
	}
}
